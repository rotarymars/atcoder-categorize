
		公式
		
			
				E - Red Polyomino 解説
			
			by sugarrr
			
		
		
		
		
			\(N^2\) 個のマスから \(K\) 個選ぶ方法は \(_{N^2}C_{K}\) 通りあり、\(_{64}C_{8} =4426165368 \gt 4 \times 10^9\) なので、愚直な全探索は間に合いません。
しかし、赤マス同士が連結という条件から、条件を満たす選び方はそれより相当に少ないことが予想できます。これは、何らかの方法で上から評価してもよいですが、今回は入出力例 \(3\) から見積もることができます。
したがって、赤マス同士が連結という条件を満たすパターンのみ列挙するdfsをすればよいです。
dfsは書き慣れていないと実装が難しいと思うので、下の例も参考にしてください。



なお、上記の実装例は読みやすさを重視していて少し遅いです。
https://atcoder.jp/contests/abc211/submissions/24453774 (541ms)

盤面の情報を vector<string> ではなく64bit整数( unsigned long long など)で管理すると高速化できます。
https://atcoder.jp/contests/abc211/submissions/24453782 (85ms)

少し難しいですが、同じ盤面では \(1\) 度しかdfsに入らないようにする実装もあります。
https://atcoder.jp/contests/abc211/submissions/24453788 (25ms)

		
		
			
				投稿日時:
				
				
			
				
				最終更新:
				
				
			
			
		
	
