語呂合わせ

概要
• 正の整数 𝑣1 , … , 𝑣𝑁 と文字列 𝑤1 , … , 𝑤𝑁 が与えられます。
• 文字列 𝑠1 , … , 𝑠𝐾 をうまく定めて、数字 𝑖 を文字列 𝑠𝑖 に変換すること
によりどの整数 𝑣𝑗 も対応する文字列 𝑤𝑗 にできるようにしてください。
• 1 ≦ 𝑁 ≦ 50
• 1 ≦ |𝑠𝑖 | ≦ 3
• 1 ≦ 𝑣𝑖 ≦ 109
• 1 ≦ |𝑤𝑖 | ≦ 27

部分点解法
• 先に文字列 𝑠1 , … , 𝑠𝐾 を決めて、それらが条件を満たすか判定しま
す。
• データセット 1 において最大 (33 +32 + 3)3 通りの組み合わせを試
すことになりますが、この大きさならば余り多くの時間をかけずに計
算することができます。
• 一方、データセット 2 になってくると最大 (263 +262 + 26)9 通りを試
すことになってしまい、これでは間に合いません。

考察
• 文字列の長さが固定された場合どうなるでしょうか?
• 実は、𝑠1 , … , 𝑠𝐾 の長さが定まると、文字列 𝑠1 , … , 𝑠𝐾 が文字列 𝑤1 ,
… , 𝑤𝑁 のうちどの範囲に合致するかが一意に定まります。
• 範囲が定まれば、𝑠1 , … , 𝑠𝐾 は一意に定まります (定まらなかった、
すなわち矛盾したらその長さの固定の仕方では答えが無いことが言
えます)。

満点解法
• 文字列 𝑠1 , … , 𝑠𝐾 の長さを固定することで、O( |𝑤𝑖 |× 𝐾)で答えを求
めることができます。
• 𝑠1 , … , 𝑠𝐾 の文字列長は 3 以下なので、全体の計算量は
O(3𝐾 × |𝑤𝑖 |× 𝐾) に抑えることができ、これならばデータセット 2
でも高速に動作します。


