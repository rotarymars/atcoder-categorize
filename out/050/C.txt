N が偶数である場合を考えます。N 人が並んだ場合、「自分の左に並んでいた人数と自分の右に並んでいた
人数の差の絶対値」は、N − 1, N − 3, N − 5, ...3, 1, 1, 3, ...N − 5, N − 3, N − 1 となるはずです。この配列
を Bi とします。
するとこの問題は、Ai を並び替えて Bi にする方法は何通りか、という問題になります。まず、Ai と Bi
で、ある値の登場する回数が等しくなかった場合、明らかに答えは 0 です。
では、等しい場合はどうなるでしょうか。この配列には、N/2 種類の値が、それぞれ 2 回ずつ登場している
はずです。それぞれの値について、並び替える方法は、「Ai で前にあったものが Bi で前にある」と、「Ai で
前にあったものが Bi で後ろにある」の 2 通り考えられます。

N/2 種類の値で独立に並び替えがあるので、求める答えは 2(N/2) になります。N が奇数である場合も同様
1

に解けますが、その場合 Ai や Bi の中に 0 という値が 1 度だけ登場することに注意してください。

