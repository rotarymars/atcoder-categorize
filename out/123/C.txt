◆

ステップ #1：貪欲的な方法でシミュレーション
人を都市 6 に向かって 「限界の人数まで進ませられるだけ進ませる」 貪欲的な方法を考えます。こ

の問題の入力例 1 では、まさにこの 「貪欲的な方法」 で人を動かしています。直感的に、これが最適
そうな感じがします (そしてこれは実に最適な方法です)。
しかし、これを単純にシミュレーションしていると、移動時間に比例する計算時間がかかります。個の問
題の制約を見ると 𝑁, 𝐴, 𝐵, 𝐶, 𝐷, 𝐸 ≤ 1015 となっていますので、最悪ケースで 1015 + 4 分の移動時
間がかかります (𝑁 = 1015 , 𝐴 = 1, 𝐵 = 1, 𝐶 = 1, 𝐷 = 1, 𝐸 = 1 の場合)。つまり、貪欲的な方法でシミ
ュレーションをすると 「実行時間超過 (TLE)」 となり、不正解となります！
もっと高速な方法を考えてみましょう・・・が、しかし、単純にシミュレーションを工夫して高速化するのは
難しいので、別の方向からこの問題を考えてみることにします。
◆

ステップ #2：最も 「きつい」 交通機関を考える
最も通りにくい、つまり容量が最も小さい交通機関を考えます。直感的には、最短時間で移動する場

合でも、1 分でたどり着けるのは 𝑋 人 (交通機関の容量の最小を 𝑋 とする) になります。これは、「1
秒に 15 L のペースで水を送れるポンプと、1 秒に 12 L のペースで水を送れるポンプをつなげたときに、
1 秒に送れる水の量は小さい方を取って 12 L」 になるのと同じ原理です。
つまり、先ほどの貪欲的な方法ではなくて、1 分に 𝑋 人ずつ 1 つ先に進めてやっても、直感的には
かかる時間は変わらなさそうです。また、移動時間は 「(𝑁 ÷ 𝑋 を切り上げた値) + 4 分」 と、簡単に
計算できるようになります。
これが最短である証明が気になる人もいるかもしれないので書いておきます。
都市 𝑖 と 𝑖 + 1 を結ぶ交通機関が最小容量 𝑋 であるとき、この交通機関にはスタートから 𝑖 − 1
分後から人が乗り始め、ゴールから 5 − 𝑖 分前には人が全員この交通機関を使い終わっていなければな
りません。合計で (𝑖 − 1) + (5 − 𝑖) = 4 分間は “誰も乗らない時間” があります。また、𝑁 人が容量
𝑋 の交通機関を使うので最小でも (𝑁 ÷ 𝑋 を切り上げた値) 回使うことになるので、最低でも “(𝑁 ÷
𝑋 を切り上げた値) + 4 分” 必要になることが分かります。
よって、𝑐𝑒𝑖𝑙(𝑥) を実数 𝑥 を切り上げた値として、答えは “𝑐𝑒𝑖𝑙(𝑁 ÷ min(𝐴, 𝐵, 𝐶, 𝐷, 𝐸)) + 4 分”
と、簡単な式で表すことができました！
ソースコード (C++)：https://atcoder.jp/contests/abc123/submissions/4840678

