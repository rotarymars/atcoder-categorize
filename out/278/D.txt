
		公式
		
			
				D - All Assign Point Add 解説
			
			by MMNMM
			
		
		
		
		
			最初にすべての要素に \(0\) が代入されたと考えて、最後の代入からの差分を保持することを考えます。
与えられるクエリは次のように言い換えられます。


これまでの差分をすべて消して \(0\) にし、最後に代入された値を \(x\) に変更する。
\(i\) 番目の差分に \(x\) を加える。
最後に代入された値に \(i\) 番目の差分を加え、出力する。


1番目のクエリで差分の値が変わる場所の個数は、直前の代入以降の2番目のクエリの個数を超えません。
よって、「差分が \(0\) でない箇所」を持っておくことで、全体で \(O(N+Q)\) 時間でこの問題を解くことができます。

また、長さ \(N\) の列に区間更新・一点取得を行うセグメント木があれば、それを直接用いることで \(O(N+Q\log N)\) 時間でこの問題を解くことができます（実装例）。

実装例は以下のようになります。



		
		
			
				投稿日時:
				
				
			
				
				最終更新:
				
				
			
			
		
	
