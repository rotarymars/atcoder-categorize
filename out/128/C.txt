まず条件を無視すると、スイッチのon/off の組み合わせは 2N通りあります。条件を満たすスイッチの状
態を直接数えるのは難しいので、この組み合わせを 1 つ固定して考えてみましょう。すると、それぞれの電球
が点灯しているかどうかチェックし、全て点灯しているかどうか判定することで答えが求まります。この時間
計算量は O(MN∗2N) です。
なおスイッチの状態を固定する方法としては、DFS を用いる方法や、スイッチの状態を Nbit の整数にエ
ンコードする方法などがあります。
今回は全列挙することで解ける制約でしたが、mod 2 での連立方程式の解を数える問題と見なせるので、
rank 等を計算することでより高速に求めることもできます。
解答例: https://atcoder.jp/contests/abc128/submissions/5640467
1
