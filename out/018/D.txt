
問題概要
• 女子 𝑁 人と男子 𝑀 人からなるクラスがある。
• 女子 𝑃 人と男子 𝑄 人からなるグループを 1 つ作る。
• 𝑅 個のチョコレートのうち、渡されるチョコレートに定められた幸福度の合
計値の最大値を計算せよ。

• 1 ≦ 𝑁 ≦ 18
• 1 ≦ 𝑀 ≦ 18
•1 ≦𝑃 ≦𝑁
•1 ≦𝑄 ≦𝑀
• 1 ≦ (幸福度) ≦ 10,000

部分点解法 (30点)
• 考えられるすべてのグループを考えます。
• グループは全部で 𝑁 C 𝑃 * 𝑀 C 𝑄 通りあるので、それらをすべて生成し、
各チョコレートについて O(1) で判定することで正解できます。

満点解法(30+70点)
• グループの数自体は多く、すべてを考慮していると時間がかかって
しまいます。
• 一方で女子だけ、男子だけの組み合わせを固定するくらいならそこ
まで組み合わせ数が多くありません。
• そこで、女子だけを固定して考えてみます。

満点解法(30+70点)
• グループ内の女子を固定した場合、各チョコレートについて、
- 送る女子がいない→そのチョコレートは考慮しない。
- 送る女子がいる→送られるかはただ 1 人の男子にのみ依存。
とわかります。
• すると、各男子ごとに、その男子がグループに入ることでいくら幸福
度が得られるかが定まります。
• この値は他の男子の選び方には依存しないので、貪欲に Q 人取れ
ば良いことがわかります。

満点解法(30+70点)
• 以上より、すべての女子の選び方を固定して、男子は貪欲に決定す
ることで高速に計算することができます。
• このような方針を半分全列挙と呼びます。
• 今回のように男女で分かれている場合もありますが、特に分けられ
ていない場合でも有用な場合があります。


