
問題概要
• ドローンを上下左右の 4 方向に何回か移動させた
• いくつかはどの方向に移動させたか分からなくなった
• ドローンの原点からのマンハッタン距離の最大値、
最小値を求めよ

サンプル1: UL?

原点から遠ざかると距離は 3 、近づくと距離は 1

考察
• 命令回数は最大 100,000 と多いので、
移動した方向を全て試すことはできない
– 最悪ケースで 4100000通りととても多い

• 距離の最大値と最小値だけ分かればよいことに着目
– 最終的な位置が原点から遠くなる、あるいは
原点に近くなる方向にだけ移動することを考えればよい

距離の最大値(100 点)
• 最終的な位置が原点から遠ざかるように移動したい
• 原点から遠ざかる方向とは？
– 移動した向きが分からない命令は動かないことにしたとき
のドローンの最終的な位置を (x, y) とする
– x ≧ 0 ならば ? を R にすることで遠ざかることが、
x < 0 ならば ? を L にすることで遠ざかることができる
– ?を同じ向きにのみ移動するように置換するのが最適

距離の最小値(101 点)
• 最終的な位置が原点に近づくように移動したい
• 原点に近づく方向とは？
– 移動した向きが分からない命令は動かないことにしたとき
のドローンの最終的な位置を (x, y) とする
– x > 0 ならば ? を L にすることで近づくことが、
x < 0 ならば ? を R にすることで近づくことができる
– y > 0 ならば ? を D にすることで近づくことが、
y < 0 ならば ? を U にすることで近づくことができる
– (x, y) = (0, 0) のときは原点から遠ざかるしかできない！

コーナーケース例: ?

原点から移動して原点に近づくことはできない！

解法
• 移動した向きが分からない命令は動かないことに
したときのドローンの最終的な位置を (x, y) とする
• その後、移動した向きが分からなかった命令を
以下のように貪欲にシミュレーションする
– 最大値を求める場合は、原点から遠ざかる方向に
移動する命令と考えてシミュレーション
– 最小値を求める場合は、原点に近づく方向に
移動する命令と考えてシミュレーション
• 原点にいる場合は遠ざかるしかできないことに注意

• 計算量は O(|S|)

別解
• 移動した向きが分からない命令は動かないことに
したときのドローンの最終的な位置を (x, y) とする
• 移動した向きが分からなかった命令の数を k とする
• 距離の最大値は |x| + |y| + k、
距離の最小値は max(|S| % 2, |x| + |y| – k) で表せる
• こちらも計算量はO(|S|)

