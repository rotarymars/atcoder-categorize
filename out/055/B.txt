「N ! を 109 + 7 で割ったあまりを求めよ」という問題です．N ! そのものを求めようとすると、
この値は非常に値が大きくなるため 64 ビット符号付き整数ではオーバーフローによって正しく値
を求められなかったり，多倍長整数の乗算計算は時間がかかるため実行時間制限内に計算を終える
ことが難しくなります．
求める必要があるのは「109 + 7 で割ったあまり」であることに着目すると，現在のパワーを x
として x = i × x mod 109 + 7 として更新していけば、64 ビット符号付整数で収まる範囲で計算
をすることが可能です．32 ビット符号付整数で扱っている場合 x × i が 109 より大きくなってし
まいオーバーフローしてしまうことに注意してください．

1

